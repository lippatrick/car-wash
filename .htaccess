RewriteEngine On

Options -MultiViews
DirectoryIndex index.php

ErrorDocument 403 /403.php
ErrorDocument 404 /404.php

<IfModule mod_headers.c>
  Header set X-Content-Type-Options "nosniff"
  Header set X-Frame-Options "SAMEORIGIN"
  Header set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

<IfModule mod_rewrite.c>

  # 1) Redirect /something.php -> /something
  RewriteCond %{THE_REQUEST} \s/+([^\s?]+)\.php[\s?] [NC]
  RewriteRule ^ %1 [R=301,L]

  # 2) If a real file or folder exists, serve it directly
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # 3) Explicit routes (pretty URLs)
  RewriteRule ^$ index.php [L]
  RewriteRule ^home/?$ index.php [L]

  RewriteRule ^about/?$ about.php [L]
  RewriteRule ^services/?$ services.php [L]
  RewriteRule ^pricing/?$ pricing.php [L]
  RewriteRule ^order/?$ order.php [L]
  RewriteRule ^contact/?$ contact.php [L]

  # 4) Fetch routes (keep these before any catch-all)
  RewriteRule ^fetch/contact-submit/?$ fetch/contact-submit.php [L,QSA]

  # 5) Generic route: /page -> page.php (ONLY if the php file exists)
  RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI}.php -f
  RewriteRule ^(.+?)/?$ $1.php [L,QSA]

</IfModule>